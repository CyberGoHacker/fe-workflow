{"_path":"/docs/js-css","_draft":false,"_partial":false,"_locale":"en","_empty":false,"title":"JS & CSS代码优化","description":"JS & CSS代码优化","excerpt":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"js--css代码优化"},"children":[{"type":"text","value":"JS & CSS代码优化"}]},{"type":"element","tag":"h2","props":{"id":"javascript-代码方面"},"children":[{"type":"text","value":"JavaScript 代码方面"}]},{"type":"element","tag":"h4","props":{"id":"使用文档碎片"},"children":[{"type":"text","value":"使用文档碎片"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"将需要添加的大量元素 先添加到文档碎片 中，再将文档碎片添加到需要插入的位置，大大减少dom操作，提高性能"}]},{"type":"element","tag":"code","props":{"code":"let domFragment = document.createDocumentFragment()\n\nfor(let i = 0; i < 10000; i++) {\n  let domSpan = document.createElement('span')\n  let domText = document.createTextNode(i)\n  domSpan.appendChild(domText)\n  domFragment.appendChild(domSpan)\n}\n\ndocument.body.appendChild(domFragment)\n","language":"js"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"let domFragment = document.createDocumentFragment()\n\nfor(let i = 0; i < 10000; i++) {\n  let domSpan = document.createElement('span')\n  let domText = document.createTextNode(i)\n  domSpan.appendChild(domText)\n  domFragment.appendChild(domSpan)\n}\n\ndocument.body.appendChild(domFragment)\n"}]}]}]},{"type":"element","tag":"h4","props":{"id":"垃圾收集内存管理"},"children":[{"type":"text","value":"垃圾收集、内存管理"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"堆内存：数据不再有用，将其值设置为null"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"栈内存：把上下文中，被外部占用的堆的占用取消即可"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"在 JS 中，常见的内存泄露主要有 4 种,全局变量、闭包、DOM 元素的引用、定时器"}]}]},{"type":"element","tag":"h4","props":{"id":"web-worker"},"children":[{"type":"text","value":"Web Worker"}]},{"type":"element","tag":"h4","props":{"id":"虚拟列表"},"children":[{"type":"text","value":"虚拟列表"}]},{"type":"element","tag":"h2","props":{"id":"css-代码方面"},"children":[{"type":"text","value":"Css 代码方面"}]},{"type":"element","tag":"h4","props":{"id":"避免出现重绘重排"},"children":[{"type":"text","value":"避免出现重绘、重排"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"集中改变样式，不要一条一条地修改 DOM 的样式;"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"不要把 DOM 结点的属性值放在循环里当成循环里的变量;"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"为动画的 HTML 元件使用 fixed 或 absoult 的 position，那么修改他们的 CSS 是不会 reflow 的;"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"不使用 table 布局。因为可能很小的一个小改动会造成整个 table 的重新布局；"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"动画开始GPU加速，translate使用3D变化；"}]}]},{"type":"element","tag":"h4","props":{"id":"提升渲染性能的css属性"},"children":[{"type":"text","value":"提升渲染性能的CSS属性"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"content-visibility 控制一个元素是否渲染其内容，并且允许浏览器跳过这些元素的布局与渲染"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"will-change: transform 将元素提升为合成层"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"contain-intrinsic-size 指定的元素自然大小，确保我们未渲染子元素的 div 仍然占据空间"}]}]}]},"body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"js--css代码优化"},"children":[{"type":"text","value":"JS & CSS代码优化"}]},{"type":"element","tag":"h2","props":{"id":"javascript-代码方面"},"children":[{"type":"text","value":"JavaScript 代码方面"}]},{"type":"element","tag":"h4","props":{"id":"使用文档碎片"},"children":[{"type":"text","value":"使用文档碎片"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"将需要添加的大量元素 先添加到文档碎片 中，再将文档碎片添加到需要插入的位置，大大减少dom操作，提高性能"}]},{"type":"element","tag":"code","props":{"code":"let domFragment = document.createDocumentFragment()\n\nfor(let i = 0; i < 10000; i++) {\n  let domSpan = document.createElement('span')\n  let domText = document.createTextNode(i)\n  domSpan.appendChild(domText)\n  domFragment.appendChild(domSpan)\n}\n\ndocument.body.appendChild(domFragment)\n","language":"js"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f83936"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-92491d"},"children":[{"type":"text","value":" domFragment "}]},{"type":"element","tag":"span","props":{"class":"ct-f83936"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-92491d"},"children":[{"type":"text","value":" document."}]},{"type":"element","tag":"span","props":{"class":"ct-bc10f5"},"children":[{"type":"text","value":"createDocumentFragment"}]},{"type":"element","tag":"span","props":{"class":"ct-92491d"},"children":[{"type":"text","value":"()"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f83936"},"children":[{"type":"text","value":"for"}]},{"type":"element","tag":"span","props":{"class":"ct-92491d"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-f83936"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-92491d"},"children":[{"type":"text","value":" i "}]},{"type":"element","tag":"span","props":{"class":"ct-f83936"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-92491d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8bbc7f"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-92491d"},"children":[{"type":"text","value":"; i "}]},{"type":"element","tag":"span","props":{"class":"ct-f83936"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-92491d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8bbc7f"},"children":[{"type":"text","value":"10000"}]},{"type":"element","tag":"span","props":{"class":"ct-92491d"},"children":[{"type":"text","value":"; i"}]},{"type":"element","tag":"span","props":{"class":"ct-f83936"},"children":[{"type":"text","value":"++"}]},{"type":"element","tag":"span","props":{"class":"ct-92491d"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-92491d"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-f83936"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-92491d"},"children":[{"type":"text","value":" domSpan "}]},{"type":"element","tag":"span","props":{"class":"ct-f83936"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-92491d"},"children":[{"type":"text","value":" document."}]},{"type":"element","tag":"span","props":{"class":"ct-bc10f5"},"children":[{"type":"text","value":"createElement"}]},{"type":"element","tag":"span","props":{"class":"ct-92491d"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-c2a7f1"},"children":[{"type":"text","value":"'span'"}]},{"type":"element","tag":"span","props":{"class":"ct-92491d"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-92491d"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-f83936"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-92491d"},"children":[{"type":"text","value":" domText "}]},{"type":"element","tag":"span","props":{"class":"ct-f83936"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-92491d"},"children":[{"type":"text","value":" document."}]},{"type":"element","tag":"span","props":{"class":"ct-bc10f5"},"children":[{"type":"text","value":"createTextNode"}]},{"type":"element","tag":"span","props":{"class":"ct-92491d"},"children":[{"type":"text","value":"(i)"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-92491d"},"children":[{"type":"text","value":"  domSpan."}]},{"type":"element","tag":"span","props":{"class":"ct-bc10f5"},"children":[{"type":"text","value":"appendChild"}]},{"type":"element","tag":"span","props":{"class":"ct-92491d"},"children":[{"type":"text","value":"(domText)"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-92491d"},"children":[{"type":"text","value":"  domFragment."}]},{"type":"element","tag":"span","props":{"class":"ct-bc10f5"},"children":[{"type":"text","value":"appendChild"}]},{"type":"element","tag":"span","props":{"class":"ct-92491d"},"children":[{"type":"text","value":"(domSpan)"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-92491d"},"children":[{"type":"text","value":"}"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-92491d"},"children":[{"type":"text","value":"document.body."}]},{"type":"element","tag":"span","props":{"class":"ct-bc10f5"},"children":[{"type":"text","value":"appendChild"}]},{"type":"element","tag":"span","props":{"class":"ct-92491d"},"children":[{"type":"text","value":"(domFragment)"}]}]}]}]}]},{"type":"element","tag":"h4","props":{"id":"垃圾收集内存管理"},"children":[{"type":"text","value":"垃圾收集、内存管理"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"堆内存：数据不再有用，将其值设置为null"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"栈内存：把上下文中，被外部占用的堆的占用取消即可"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"在 JS 中，常见的内存泄露主要有 4 种,全局变量、闭包、DOM 元素的引用、定时器"}]}]},{"type":"element","tag":"h4","props":{"id":"web-worker"},"children":[{"type":"text","value":"Web Worker"}]},{"type":"element","tag":"h4","props":{"id":"虚拟列表"},"children":[{"type":"text","value":"虚拟列表"}]},{"type":"element","tag":"h2","props":{"id":"css-代码方面"},"children":[{"type":"text","value":"Css 代码方面"}]},{"type":"element","tag":"h4","props":{"id":"避免出现重绘重排"},"children":[{"type":"text","value":"避免出现重绘、重排"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"集中改变样式，不要一条一条地修改 DOM 的样式;"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"不要把 DOM 结点的属性值放在循环里当成循环里的变量;"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"为动画的 HTML 元件使用 fixed 或 absoult 的 position，那么修改他们的 CSS 是不会 reflow 的;"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"不使用 table 布局。因为可能很小的一个小改动会造成整个 table 的重新布局；"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"动画开始GPU加速，translate使用3D变化；"}]}]},{"type":"element","tag":"h4","props":{"id":"提升渲染性能的css属性"},"children":[{"type":"text","value":"提升渲染性能的CSS属性"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"content-visibility 控制一个元素是否渲染其内容，并且允许浏览器跳过这些元素的布局与渲染"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"will-change: transform 将元素提升为合成层"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"contain-intrinsic-size 指定的元素自然大小，确保我们未渲染子元素的 div 仍然占据空间"}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-c2a7f1{color:#96D0FF}.ct-8bbc7f{color:#6CB6FF}.ct-bc10f5{color:#DCBDFB}.ct-92491d{color:#ADBAC7}.ct-f83936{color:#F47067}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"javascript-代码方面","depth":2,"text":"JavaScript 代码方面"},{"id":"css-代码方面","depth":2,"text":"Css 代码方面"}]}},"_type":"markdown","_id":"content:docs:72.js-css.md","_source":"content","_file":"docs/72.js-css.md","_extension":"md"}