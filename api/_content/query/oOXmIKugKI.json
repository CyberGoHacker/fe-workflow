{"_path":"/docs/husky-lintstaged","_dir":"docs","_draft":false,"_partial":false,"_locale":"en","_empty":false,"title":"Husky&Lintstaged","description":"Husky&Lintstaged配置使用指南","excerpt":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"husky--lintstaged"},"children":[{"type":"text","value":"Husky & Lintstaged"}]},{"type":"element","tag":"h4","props":{"id":"husky-配置-git-hooks在代码提交不同阶段进行质量检测"},"children":[{"type":"text","value":"Husky 配置 Git Hooks，在代码提交不同阶段进行质量检测。"}]},{"type":"element","tag":"h4","props":{"id":"lint-staged-取消全量检测整个仓库对待提交区做到增量代码检测"},"children":[{"type":"text","value":"lint-staged 取消全量检测整个仓库，对待提交区做到增量代码检测。"}]},{"type":"element","tag":"h4","props":{"id":"配合-husky由-husky-触发-lint-staged再由-lint-staged-执行检测脚本"},"children":[{"type":"text","value":"配合 husky，由 husky 触发 lint-staged，再由 lint-staged 执行检测脚本。"}]},{"type":"element","tag":"alert","props":{"type":"info"},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"不同阶段 Git Hooks\n"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\npre-commit # git commit 执行前\n"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\ncommit-msg # git commit 执行前（检测 commit 信息）\n"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\npre-push # git push 执行前"}]}]},{"type":"element","tag":"h2","props":{"id":"安装配置"},"children":[{"type":"text","value":"安装&配置"}]},{"type":"element","tag":"code","props":{"code":"pnpm add husky lint-staged -D\n\n# 在 package.json 中添加脚本\n{\n  \"scripts\": {\n    \"prepare\": \"husky install\"\n  }\n}\n\n# 初始化 husky，husky 代替 git hooks (根目录创建 .husky 文件夹)\npnpm prepare\n\n# .husky/pre-commit 添加触发命令（提交代码时会执行 lint-staged 进行暂存代码检查）\nnpx husky add .husky/pre-commit \"npx lint-staged\"\n","language":"bash"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"pnpm add husky lint-staged -D\n\n# 在 package.json 中添加脚本\n{\n  \"scripts\": {\n    \"prepare\": \"husky install\"\n  }\n}\n\n# 初始化 husky，husky 代替 git hooks (根目录创建 .husky 文件夹)\npnpm prepare\n\n# .husky/pre-commit 添加触发命令（提交代码时会执行 lint-staged 进行暂存代码检查）\nnpx husky add .husky/pre-commit \"npx lint-staged\"\n"}]}]}]},{"type":"element","tag":"h2","props":{"id":"创建-lintstagedrc"},"children":[{"type":"text","value":"创建 .lintstagedrc"}]},{"type":"element","tag":"code","props":{"code":"{\n  \"*.{js,jsx,ts,tsx,vue}\": [\"prettier --write .\", \"eslint  --fix\"],\n  \"*.md\": [\"prettier --write\"],\n  \"*.scss\": [\"stylelint --fix\"]\n}\n","language":"json"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"{\n  \"*.{js,jsx,ts,tsx,vue}\": [\"prettier --write .\", \"eslint  --fix\"],\n  \"*.md\": [\"prettier --write\"],\n  \"*.scss\": [\"stylelint --fix\"]\n}\n"}]}]}]}]},"body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"husky--lintstaged"},"children":[{"type":"text","value":"Husky & Lintstaged"}]},{"type":"element","tag":"h4","props":{"id":"husky-配置-git-hooks在代码提交不同阶段进行质量检测"},"children":[{"type":"text","value":"Husky 配置 Git Hooks，在代码提交不同阶段进行质量检测。"}]},{"type":"element","tag":"h4","props":{"id":"lint-staged-取消全量检测整个仓库对待提交区做到增量代码检测"},"children":[{"type":"text","value":"lint-staged 取消全量检测整个仓库，对待提交区做到增量代码检测。"}]},{"type":"element","tag":"h4","props":{"id":"配合-husky由-husky-触发-lint-staged再由-lint-staged-执行检测脚本"},"children":[{"type":"text","value":"配合 husky，由 husky 触发 lint-staged，再由 lint-staged 执行检测脚本。"}]},{"type":"element","tag":"alert","props":{"type":"info"},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"不同阶段 Git Hooks\n"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\npre-commit # git commit 执行前\n"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\ncommit-msg # git commit 执行前（检测 commit 信息）\n"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\npre-push # git push 执行前"}]}]},{"type":"element","tag":"h2","props":{"id":"安装配置"},"children":[{"type":"text","value":"安装&配置"}]},{"type":"element","tag":"code","props":{"code":"pnpm add husky lint-staged -D\n\n# 在 package.json 中添加脚本\n{\n  \"scripts\": {\n    \"prepare\": \"husky install\"\n  }\n}\n\n# 初始化 husky，husky 代替 git hooks (根目录创建 .husky 文件夹)\npnpm prepare\n\n# .husky/pre-commit 添加触发命令（提交代码时会执行 lint-staged 进行暂存代码检查）\nnpx husky add .husky/pre-commit \"npx lint-staged\"\n","language":"bash"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7c34c1"},"children":[{"type":"text","value":"pnpm add husky lint-staged -D"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0a71bc"},"children":[{"type":"text","value":"# 在 package.json 中添加脚本"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7c34c1"},"children":[{"type":"text","value":"{"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7c34c1"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-43c3a6"},"children":[{"type":"text","value":"\"scripts\""}]},{"type":"element","tag":"span","props":{"class":"ct-7c34c1"},"children":[{"type":"text","value":": {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7c34c1"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-43c3a6"},"children":[{"type":"text","value":"\"prepare\""}]},{"type":"element","tag":"span","props":{"class":"ct-7c34c1"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-43c3a6"},"children":[{"type":"text","value":"\"husky install\""}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7c34c1"},"children":[{"type":"text","value":"  }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7c34c1"},"children":[{"type":"text","value":"}"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0a71bc"},"children":[{"type":"text","value":"# 初始化 husky，husky 代替 git hooks (根目录创建 .husky 文件夹)"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7c34c1"},"children":[{"type":"text","value":"pnpm prepare"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0a71bc"},"children":[{"type":"text","value":"# .husky/pre-commit 添加触发命令（提交代码时会执行 lint-staged 进行暂存代码检查）"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7c34c1"},"children":[{"type":"text","value":"npx husky add .husky/pre-commit "}]},{"type":"element","tag":"span","props":{"class":"ct-43c3a6"},"children":[{"type":"text","value":"\"npx lint-staged\""}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"创建-lintstagedrc"},"children":[{"type":"text","value":"创建 .lintstagedrc"}]},{"type":"element","tag":"code","props":{"code":"{\n  \"*.{js,jsx,ts,tsx,vue}\": [\"prettier --write .\", \"eslint  --fix\"],\n  \"*.md\": [\"prettier --write\"],\n  \"*.scss\": [\"stylelint --fix\"]\n}\n","language":"json"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7c34c1"},"children":[{"type":"text","value":"{"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7c34c1"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-33565c"},"children":[{"type":"text","value":"\"*.{js,jsx,ts,tsx,vue}\""}]},{"type":"element","tag":"span","props":{"class":"ct-7c34c1"},"children":[{"type":"text","value":": ["}]},{"type":"element","tag":"span","props":{"class":"ct-43c3a6"},"children":[{"type":"text","value":"\"prettier --write .\""}]},{"type":"element","tag":"span","props":{"class":"ct-7c34c1"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-43c3a6"},"children":[{"type":"text","value":"\"eslint  --fix\""}]},{"type":"element","tag":"span","props":{"class":"ct-7c34c1"},"children":[{"type":"text","value":"],"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7c34c1"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-33565c"},"children":[{"type":"text","value":"\"*.md\""}]},{"type":"element","tag":"span","props":{"class":"ct-7c34c1"},"children":[{"type":"text","value":": ["}]},{"type":"element","tag":"span","props":{"class":"ct-43c3a6"},"children":[{"type":"text","value":"\"prettier --write\""}]},{"type":"element","tag":"span","props":{"class":"ct-7c34c1"},"children":[{"type":"text","value":"],"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7c34c1"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-33565c"},"children":[{"type":"text","value":"\"*.scss\""}]},{"type":"element","tag":"span","props":{"class":"ct-7c34c1"},"children":[{"type":"text","value":": ["}]},{"type":"element","tag":"span","props":{"class":"ct-43c3a6"},"children":[{"type":"text","value":"\"stylelint --fix\""}]},{"type":"element","tag":"span","props":{"class":"ct-7c34c1"},"children":[{"type":"text","value":"]"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7c34c1"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-33565c{color:#6CB6FF}.ct-43c3a6{color:#96D0FF}.ct-0a71bc{color:#768390}.ct-7c34c1{color:#ADBAC7}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"安装配置","depth":2,"text":"安装&配置"},{"id":"创建-lintstagedrc","depth":2,"text":"创建 .lintstagedrc"}]}},"_type":"markdown","_id":"content:docs:31.husky-lintstaged.md","_source":"content","_file":"docs/31.husky-lintstaged.md","_extension":"md"}